<%- include("../partials/header.ejs", {
    image_url : community.cdn_icon_url,
    title : `Aquamarine - ${community.name}`,
    description : community.description
}) -%>

<body>
    <%- include("../partials/elements/navbar.ejs") %>

    <div class="wrapper">
        <div class="community-wrapper">
            <div class="community-sidebar">
                <div class="community-banner">
                    <% if (community.cdn_ctr_banner_url) { %>
                        <a href="/communities/<%= community.id %>">
                            <img src="<%= community.cdn_ctr_banner_url %>" height="137px">
                        </a>
                    <% } %>
                </div>
                <div class="community-info-wrapper">
                    <div class="community-info">
                        <img class="icon trigger" src="<%= community.cdn_icon_url %>" width="55px" data-href="/communities/<%= community.id %>">

                        <div>
                            <% if (community.type=="main" ) {%>
                                <span class="community-type">Main Community</span>
                            <%} else if (community.type=="sub" ) {%>
                                <span class="community-type">Sub Community</span>
                            <%} else if (community.type=="announcement" ) {%>
                                <span class="community-type">Announcement Community</span>
                            <%}%>
                            <span class="community-name"><%= community.name %></span>
                            <span class="community-app-name"><%= community.app_name %></span>
                        </div>
                    </div>

                    <% if (community.description) { %>
                        <div class="community-description-wrapper">
                            <span><%= community.description %></span>
                        </div>
                    <% } %>   
                </div>
            </div>
            <div class="community-content">
                <% if (locals.guest_mode) { %>
                    <%- include("../partials/elements/ugc/guest_mode/communities_posts.ejs") -%>
                <% } else { %>
                    <div class="community-post-list normal">
                        <div class="header">
                            <span>Posts</span>
                        </div>
                        
                        <div class="list">
                            <div class="add-new-post">
                                <div></div>
                                <textarea data-expand minlength="5" maxlength="650" placeholder="Share your thoughts with the <%= community.name %> Community!"></textarea>
                            </div>

                            <% for (const post of normal_posts) { %>
                                <%- include("../partials/elements/ugc/posts.ejs", {
                                    post : post
                                }) -%>
                            <% } %>

                            <% if (normal_posts.length <= 0) { %>
                                <span class="no-posts">There are no posts yet.</span>
                            <% } %>
                        </div>
                    </div>
                <%} %>
            </div>
        </div>
    </div>

    <%- include("../partials/elements/footer.ejs") -%>
</body>

</html>